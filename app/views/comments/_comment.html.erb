<div id="comment_<%= comment.id %>" class="graybox">
  <h2>
    <%= comment.user ? comment.user : comment.username %>
    -
    <%= comment.created_at.strftime('%d/%m/%Y %H:%M') %>
  </h2>
  <div>
    <%= markdown comment.message %>
    <%= link_to 'Répondre', 
                new_project_comment_path(project,
                                         ancestry: comment),
                class: 'btn' %>
    <% if can? :destroy, comment %>
      <%= link_to 'Supprimer', 
                  project_comment_path(project, comment),
                  method: 'delete', 
                  data: { confirm: 'Êtes vous sûr?' },
                  class: 'btn btn-danger' %>
    <% end %>
  </div>
  <br/>
  <% comment.children.order(:created_at).each do |sub_comment| %>
    <%= render sub_comment, project: project %>
  <% end %>
</div>
